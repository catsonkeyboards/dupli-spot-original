<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Dupli-Spot: The ultimate Spotify Cross-Playlist De-Duplicator. Easily find and remove duplicate tracks across your playlists.">
  <link rel="icon" href="/images/fav_new.ico">
  <title>Dupli-Spot</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Header -->
  <header>
    <!-- Main title -->
    <h1 class="main-title"><a href="index.html" style="text-decoration: none; color: #242324;">Dupli-Spot</a></h1>
    <!-- Page title -->
    <h1 class="title">Spotify Cross-Playlist<br>De-Duplicator</h1>
    <!-- Login button section -->
    <div class="login-button">
      <!-- Login button with Spotify logo -->
      <button id="login-button">
        <img src="images/spotify-logo.svg" alt="Spotify Logo" class="spotify-logo">
        Log in with Spotify
      </button>      
      <!-- Show Duplicates Button -->
      <button id="show-duplicates" class="disabled" disabled style="display: none;">Show Duplicates</button>
      <div>
        <!-- Remove Duplicates Button -->
        <button id="remove-duplicates" style="display: none;">Remove Duplicates</button>
      </div>
  </header>

  <div class="main-content">
    <main>
      <!-- Playlist Drop-Down Section -->
      <div>
        <select id="removal-playlist-dropdown" style="display: none;">
          <!-- Options will be dynamically added here -->
        </select>
        <div id="dropdown-title" style="display: none;">Select the playlist to remove the selected tracks from.</div>
      </div>
      <div id="error-message" style="color: red; display: none;"></div>

      <!-- Playlists section -->
      <div id="search-container">
        <input type="text" id="playlist-search" placeholder="Search for a playlist...">
      </div>

      <!-- Instruction text -->
      <div id="instruction-text" style="display: none;">
        Select two playlists from the list to find matching tracks.<br>
        The Search bar above will let you search from the list of playlists that's showing on screen.<br>
        You can load more playlists by scrolling to the bottom and clicking 'Load More'.<br>
      </div>

      <div id="playlist-count">
        <!-- A count of how many playlists are selected, starting with "0 of 2 Playlists Selected"-->
      </div>

      <div id="playlists">
        <!-- Playlists will be appended here -->
      </div>

      <!-- Loading Graphic-->
      <div id="loading" style="display: none; padding-bottom: 100px; padding-top: 100px;">
        <center>
          <div class="loader" style="padding: 20px;"></div>
        </center>
        <div id="loading-status" style="margin: 20px;">Loading...</div>
      </div>

      <div id="compared-playlists" style="display: none;">
        <strong>Compared Playlists:</strong><br>
        <span id="playlist1-name"></span><br>
        <span id="playlist2-name"></span>
      </div>

      <!-- Duplicates section -->
      <div id="duplicates" style="display: none; padding: 20px; text-align: left; max-width: 800px; margin: 0 auto;">
        <h2>Duplicate Tracks</h2>

        <div id="duplicate-tracks">
          <!-- Duplicate tracks will be inserted here -->
        </div>
      </div>

      <!-- Success message -->
      <div id="success-message" style="display: none; text-align: center;">
        Duplicates have been removed!
      </div>

      <div id="loading-graphic" style="display: none; padding: 30px;">
        <center>
          <div class="loader-small" style="padding: 20px;"></div>
        </center>
        <div id="loading-status" style="margin: 20px;">Reloading tracks after removing duplicates, please wait...</div>
      </div>

      <!-- Start Over Button -->
      <button id="start-over-button" style="display: none;">Start Over</button>

      <!-- Load More button -->
      <div>
        <button id="load-more" style="display: none; text-align: center;">Load More</button>
      </div>

      <!-- README section -->
      <section class="readme">
        <div id="readme-content"></div>
      </section>

  </div>
  </main>

  <!-- Footer -->
  <footer>
    <section>
      <p>This web app uses the <a class="footer-link" href="https://developer.spotify.com/documentation/web-api">Spotify Web API</a> to manage user's playlists and saved tracks.</p>
      <p>Dupli-Spot will only remove user-selected tracks, leaving other playlists and saved songs untouched.</p>
    </section>
    <nav>
      <p>&copy; 2023 Dupli-Spot by Sound Niccol√≤ Studios All Rights Reserved. <a class="footer-link" href="privacy-policy.html">Privacy Policy</a></p>
    </nav>
  </footer>

<!-- Scripts -->
<script type="text/javascript" src="lib/DOMPurify-main/dist/purify.js"></script>
<script src="marked.js"></script>
<script src="/lib/promise-throttle-master/dist/promise-throttle.js"></script>
<script src="utilities.js"></script>
<script src="config.js"></script>
<script src="script.js"></script>
<script async src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-name="BMC-Widget" data-cfasync="false"
  data-id="morgan.makes" data-description="Support me on Buy me a coffee!"
  data-message="Come to Florence I'll give you a gelato tour!" data-color="#f9e2f9" data-position="Right"
  data-x_margin="18" data-y_margin="18"></script>
<script>
  fetch('README.md')
    .then(response => response.text())
    .then(text => {
      const readmeContent = document.getElementById('readme-content');
      readmeContent.innerHTML = marked(text);
    })
    .catch(error => {
      console.error('Error loading README:', error);
    });
</script>


</body>

</html>